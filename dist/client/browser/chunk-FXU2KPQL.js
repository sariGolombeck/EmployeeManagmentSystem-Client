import{a as se}from"./chunk-GFH2QQYW.js";import{b as v,d as b,e as L,g as W,h as q,i as U,j as Y,k as G,l as J,m as K,n as X,o as Z,p as ee,q as te,s as ie,t as ne,u as oe,v as ae,x as re,y as le,z as me}from"./chunk-ARPLBDTD.js";import{Ba as Q,Y as O,Z as $,Za as P,bb as ce,h as H,ra as j,wa as z,za as B}from"./chunk-V3EHYJZU.js";import{Bb as D,Eb as d,Gb as g,Kb as M,Lb as k,Mb as T,Nb as R,Ob as r,Pb as V,Qb as C,Ua as c,Va as p,Wb as A,Zb as N,_b as F,ia as w,kb as f,la as I,mb as E,ra as u,sa as _,vb as o,wb as a,xb as x,yb as y,zb as h}from"./chunk-GCOWUSY3.js";var de=(()=>{let t=class t{constructor(n,i){this.dialogRef=n,this.data=i}};t.\u0275fac=function(i){return new(i||t)(p(ne),p(oe))},t.\u0275cmp=w({type:t,selectors:[["app-delete-employee-confirmation-dialog"]],decls:13,vars:1,consts:[[1,"dialog-content"],["mat-dialog-title","",1,"dialog-title"],[1,"dialog-message"],[1,"dialog-actions"],["mat-button","",1,"confirm-button",3,"click"],["mat-button","",1,"cancel-button",3,"click"]],template:function(i,l){i&1&&(o(0,"mat-dialog-content",0)(1,"h2",1),r(2,"Confirm Employee Deletion"),a(),o(3,"p",2),r(4,"Are you sure you want to delete "),o(5,"b"),r(6),a(),r(7,"?"),a()(),o(8,"mat-dialog-actions",3)(9,"button",4),d("click",function(){return l.dialogRef.close(!0)}),r(10,"Confirm"),a(),o(11,"button",5),d("click",function(){return l.dialogRef.close(!1)}),r(12,"Cancel"),a()()),i&2&&(c(6),V(l.data.employeeName))},dependencies:[re,me,le,O],encapsulation:2});let e=t;return e})();var fe=(()=>{let t=class t{transform(n){if(!n)return"";let i;typeof n=="string"?i=new Date(n):i=n;let l=i.getFullYear(),m=i.getMonth()+1,S=i.getDate();return`${l}-${m.toString().padStart(2,"0")}-${S.toString().padStart(2,"0")}`}};t.\u0275fac=function(i){return new(i||t)},t.\u0275pipe=I({name:"dateOnly",type:t,pure:!0});let e=t;return e})();var Ce=()=>[5,10,25,100];function Se(e,t){if(e&1){let s=D();o(0,"th",18)(1,"mat-icon",19),d("click",function(){u(s);let i=g();return _(i.addEmployee())}),r(2,"add"),a()()}}function Ee(e,t){e&1&&(o(0,"th",20),r(1," ID "),a())}function ge(e,t){if(e&1&&(o(0,"td",21),r(1),a()),e&2){let s=t.$implicit;c(),C(" ",s.identity," ")}}function we(e,t){e&1&&(o(0,"th",20),r(1," First Name "),a())}function xe(e,t){if(e&1&&(o(0,"td",21),r(1),a()),e&2){let s=t.$implicit;c(),C(" ",s.firstName," ")}}function De(e,t){e&1&&(o(0,"th",20),r(1," Last Name "),a())}function ve(e,t){if(e&1&&(o(0,"td",21),r(1),a()),e&2){let s=t.$implicit;c(),C(" ",s.lastName," ")}}function be(e,t){e&1&&(o(0,"th",20),r(1," Start of Work Date "),a())}function Me(e,t){if(e&1&&(o(0,"td",21),r(1),N(2,"dateOnly"),a()),e&2){let s=t.$implicit;c(),C(" ",F(2,1,s.startOfWorkDate)," ")}}function ke(e,t){e&1&&(o(0,"th",18),r(1," Actions "),a())}function Te(e,t){if(e&1){let s=D();o(0,"td",21)(1,"button",22),d("click",function(){let i=u(s).$implicit,l=g();return _(l.editEmployee(i))}),o(2,"mat-icon"),r(3,"edit"),a()(),o(4,"button",22),d("click",function(){let i=u(s).$implicit,l=g();return _(l.deleteEmployee(i))}),o(5,"mat-icon"),r(6,"delete"),a()()()}}function Ie(e,t){e&1&&x(0,"tr",23)}function Re(e,t){e&1&&x(0,"tr",24)}function Ve(e,t){if(e&1&&(o(0,"tr",25)(1,"td",26),r(2),a()()),e&2){g();let s=R(4);c(2),C('No data matching the filter "',s.value,'"')}}var Ge=(()=>{let t=class t{constructor(n,i,l,m,S){this._employeeService=n,this._authService=i,this.snackBar=l,this._router=m,this.dialog=S,this.displayedColumns=["identity","firstName","lastName","startOfWorkDate","actions"],this.dataSource=new ie([])}addEmployee(){this._router.navigate(["employees/add-employee"])}ngOnInit(){this._employeeService.getAllEmployees().subscribe({next:n=>{this.dataSource.data=n},error:n=>{console.error(n)}})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}applyFilter(n){let i=n.target.value;this.dataSource.filter=i.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}editEmployee(n){this._router.navigate(["employees/update",n.id])}deleteEmployee(n){typeof sessionStorage<"u"&&(this._authService.isAuthorized()||(this.displayUnauthorizedAccessError(),this._router.navigate(["login"]))),this._authService.isAuthorized()&&this.dialog.open(de,{width:"350px",data:n}).afterClosed().subscribe(l=>{l&&this._employeeService.deleteEmployee(n.id).subscribe(()=>{this._employeeService.getAllEmployees().subscribe({next:m=>{this.dataSource.data=m},error:m=>{console.error(m)}})})})}displayUnauthorizedAccessError(){this.snackBar.open("You do not have access. Redirecting to authorization page","Error",{duration:3e3,panelClass:["mat-snackbar-error"]})}};t.\u0275fac=function(i){return new(i||t)(p(se),p(Q),p(P),p(H),p(ae))},t.\u0275cmp=w({type:t,selectors:[["app-employees"]],viewQuery:function(i,l){if(i&1&&(M(v,5),M(b,5)),i&2){let m;k(m=T())&&(l.paginator=m.first),k(m=T())&&(l.sort=m.first)}},decls:30,vars:5,consts:[["input",""],[1,"search-field"],["matInput","","placeholder","Search for employees",3,"keyup"],["mat-icon-button","",1,"add-contact-button",3,"click"],[1,"mat-elevation-z8","table-container"],["mat-table","","matSort","",3,"dataSource"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","identity"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","firstName"],["matColumnDef","lastName"],["matColumnDef","startOfWorkDate"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell",""],[3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","5",1,"mat-cell"]],template:function(i,l){if(i&1){let m=D();o(0,"mat-form-field",1)(1,"mat-label"),r(2,"Search"),a(),o(3,"input",2,0),d("keyup",function(ue){return u(m),_(l.applyFilter(ue))}),a()(),o(5,"button",3),d("click",function(){return u(m),_(l.addEmployee())}),o(6,"mat-icon"),r(7,"person_add"),a()(),o(8,"div",4)(9,"table",5),f(10,Se,3,0,"th",6),y(11,7),f(12,Ee,2,0,"th",8)(13,ge,2,1,"td",9),h(),y(14,10),f(15,we,2,0,"th",8)(16,xe,2,1,"td",9),h(),y(17,11),f(18,De,2,0,"th",8)(19,ve,2,1,"td",9),h(),y(20,12),f(21,be,2,0,"th",8)(22,Me,3,3,"td",9),h(),y(23,13),f(24,ke,2,0,"th",6)(25,Te,7,0,"td",9),h(),f(26,Ie,1,0,"tr",14)(27,Re,1,0,"tr",15)(28,Ve,3,1,"tr",16),a(),x(29,"mat-paginator",17),a()}i&2&&(c(9),E("dataSource",l.dataSource),c(17),E("matHeaderRowDef",l.displayedColumns),c(),E("matRowDefColumns",l.displayedColumns),c(2),E("pageSizeOptions",A(4,Ce)))},dependencies:[z,j,B,$,W,U,K,Y,q,X,G,J,Z,ee,te,b,L,v,ce,fe]});let e=t;return e})();export{Ge as a};
